Terraform Module: Google Cloud MySQL
====================================

A Terraform module for [Google Cloud](https://cloud.google.com) that simplifies the creation of a Cloud SQL instance.

## Basic usage

```hcl-terraform
module db {
  source = "garbetjie/cloud-mysql/google"
  name = "my-db"
  region = "europe-west4"
}
```

## Inputs

| Name                     | Description                                                                                                                                                                                                       | Type                                                                                          | Default                                                                                                                                                      | Required |
|--------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------|----------|
| name                     | Name of the Cloud SQL instance to be created. If `add_name_suffix` is true, this becomes the prefix.                                                                                                              | string                                                                                        |                                                                                                                                                              | Yes      |
| region                   | Region in which to create the instance.                                                                                                                                                                           | string                                                                                        |                                                                                                                                                              | Yes      |
| database_version         | Version of MySQL to create the instance with. Can be one of `MYSQL_5_6`, `MYSQL_5_7`, or `MYSQL_8_0`.                                                                                                             | string                                                                                        | `MYSQL_8_0`                                                                                                                                                  | No       |
| tier                     | Machine type to use when creating the database.                                                                                                                                                                   | string                                                                                        | `db-f1-micro`                                                                                                                                                | No       |
| disk_autoresize          | Automatically grow the size of the instance's disk.                                                                                                                                                               | bool                                                                                          | `true`                                                                                                                                                       | No       |
| disk_size                | Size of the instance's disk (in GB).                                                                                                                                                                              | number                                                                                        | `10`                                                                                                                                                         | No       |
| disk_type                | Type of disk to use (spinning disk vs SSD). Can be one of `PD_SSD` or `PD_HDD`.                                                                                                                                   | string                                                                                        | `PD_HDD`                                                                                                                                                     | No       |
| default_flags            | Default map of database flags that is merged with the values in `flags`.                                                                                                                                          | map(string)                                                                                   | `{character_set_server="utf8mb4", query_cache_type="0", query_cache_size="0", default_time_zone="+00:00", event_scheduler="on", innodb_file_per_table="on"}` | No       |
| flags                    | Additional flags to be added to the instance.                                                                                                                                                                     | map(string)                                                                                   | `{}`                                                                                                                                                         | No       |
| labels                   | Labels to apply to the instance.                                                                                                                                                                                  | map(string)                                                                                   | `{}`                                                                                                                                                         | No       |
| backups_enabled          | Enable backups.                                                                                                                                                                                                   | bool                                                                                          | `true`                                                                                                                                                       | No       |
| backup_start_time        | The start time of the 4 hour backup window (specified in UTC).                                                                                                                                                    | string                                                                                        | `00:00`                                                                                                                                                      | No       |
| ipv4_enabled             | Assign a public ID to this instance.                                                                                                                                                                              | bool                                                                                          | `true`                                                                                                                                                       | No       |
| private_network_link     | `self_link` of a network in which to assign a private IP address.                                                                                                                                                 | string                                                                                        | `null`                                                                                                                                                       | No       |
| authorized_networks      | CIDR ranges allowed access to the instance.                                                                                                                                                                       | list(string)                                                                                  | `[]`                                                                                                                                                         | No       |
| enable_read_replica      | Enable creation of a read-only replica of the master instance.                                                                                                                                                    | bool                                                                                          | `false`                                                                                                                                                      | No       |
| read_replica_name_suffix | Suffix to add to the name of the read-only replica.                                                                                                                                                               | string                                                                                        | `-readonly`                                                                                                                                                  | No       |
| enable_high_availability | Enable creation of a [highly available instance](https://cloud.google.com/sql/docs/mysql/high-availability).                                                                                                      | bool                                                                                          | `false`                                                                                                                                                      | No       |
| databases                | List of databases to create on the instance.                                                                                                                                                                      | list(string)                                                                                  | `[]`                                                                                                                                                         | No       |
| users                    | List of users to create on the instance.                                                                                                                                                                          | list(object({ username=string, password=string, host=string, privileges=map(list(string)) })) | `[]`                                                                                                                                                         | No       |
| add_name_suffix          | Adds a randomly generated suffix to instance names to guarantee uniqueness, as [instance names can't be re-used for up to a week](https://cloud.google.com/sql/docs/mysql/instance-settings#instance-id-2ndgen)). | bool                                                                                          | `true`                                                                                                                                                       | No       |